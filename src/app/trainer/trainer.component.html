<mat-card class="trainer-card">
  
  <ng-container *ngIf="!finished; else result">
    <button class="theme-button" (click)="toggleTheme()">
      {{ isDarkTheme ? 'ะกะฒะตัะปะฐั ัะตะผะฐ โ๏ธ' : 'ะขะตะผะฝะฐั ัะตะผะฐ ๐' }}
    </button>
    <div class="controls">
      <button mat-raised-button color="primary" (click)="toggleLanguage()">
        {{ currentLanguage === 'en' ? 'ะัััะบะธะน ๐' : 'English ๐ฝ' }}
      </button>


      <button class="refresh-button" (click)="startNewText()">
        ะะพะฒัะน ัะตะบัั ๐๏ธ
      </button>
    </div>
      <app-audio-player></app-audio-player>


    
    <div class="text-line">
      <span
        *ngFor="let char of visibleChars; let i = index"
        [class.active]="i === 0"
        [class.space]="char === ' '">
        {{ char === ' ' ? 'โฃ' : char }}
      </span>
    </div>

    <mat-form-field appearance="outline" class="input">
      <input
        matInput
        [formControl]="form.controls.input"
        autocomplete="off"
        autofocus
      />
    </mat-form-field>

    <mat-progress-bar
      mode="determinate"
      [value]="progress">
    </mat-progress-bar>

    <div class="stats">
      <span>ะกะบะพัะพััั ๐ฅต: {{ wpm }}</span>
      <span>ะัะธะฑะบะธ ๐จโ๐ซ: {{ errors }}</span>
    </div>

  </ng-container>

  <ng-template #result>
    <h2>ะะตะทัะปััะฐั</h2>
    <p>ะกะบะพัะพััั: <b>{{ wpm }} WPM</b></p>
    <p>ะัะธะฑะบะธ: <b>{{ errors }}</b></p>

    <button mat-raised-button color="primary" (click)="restart()">
      ะะฐะฝะพะฒะพ
    </button>
  </ng-template>
  <div class="footer-image"></div>

</mat-card>
