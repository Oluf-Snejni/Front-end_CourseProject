<mat-card class="trainer-card">
  
  <ng-container *ngIf="!finished; else result">
    <button class="theme-button" (click)="toggleTheme()">
      {{ isDarkTheme ? '–°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞' : '–¢–µ–º–Ω–∞—è —Ç–µ–º–∞' }}
    </button>
    <app-audio-player></app-audio-player>
    <div class="controls">
      <button mat-raised-button color="primary" (click)="toggleLanguage()">
        {{ currentLanguage === 'en' ? '–†—É—Å—Å–∫–∏–π' : 'English' }}
      </button>
    </div>
    <div class="text-line">
      <span
        *ngFor="let char of visibleChars; let i = index"
        [class.active]="i === 0"
        [class.space]="char === ' '">
        {{ char === ' ' ? '‚ê£' : char }}
      </span>
    </div>

    <mat-form-field appearance="outline" class="input">
      <input
        matInput
        [formControl]="form.controls.input"
        autocomplete="off"
        autofocus
      />
    </mat-form-field>

    <mat-progress-bar
      mode="determinate"
      [value]="progress">
    </mat-progress-bar>

    <div class="stats">
      <span>–°–∫–æ—Ä–æ—Å—Ç—å ü•µ: {{ wpm }}</span>
      <span>–û—à–∏–±–∫–∏ üë®‚Äçüè´: {{ errors }}</span>
    </div>

  </ng-container>

  <ng-template #result>
    <h2>–†–µ–∑—É–ª—å—Ç–∞—Ç</h2>
    <p>–°–∫–æ—Ä–æ—Å—Ç—å: <b>{{ wpm }} WPM</b></p>
    <p>–û—à–∏–±–∫–∏: <b>{{ errors }}</b></p>

    <button mat-raised-button color="primary" (click)="restart()">
      –ó–∞–Ω–æ–≤–æ
    </button>
  </ng-template>
  <div class="footer-image"></div>

</mat-card>
